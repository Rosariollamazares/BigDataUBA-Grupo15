import requests
import pandas as pd


BASE_URL = "http://api.worldbank.org/v2/country/{}/indicator/{}"


paises = ["ARG", "BRA"]
indicadores = ["NY.GDP.MKTP.CD", "SP.POP.TOTL"]


resultados = []
for pais in paises:
    for indicador in indicadores:
        url = BASE_URL.format(pais, indicador)
        params = {"format": "json", "per_page": 10}
        response = requests.get(url, params=params)

        if response.status_code == 200:
            data = response.json()
            if len(data) > 1:
                for entry in data[1]:
                    resultados.append({
                        "País": pais,
                        "Indicador": entry["indicator"]["value"],
                        "Año": entry["date"],
                        "Valor": entry["value"]
                    })
        else:
            print(f"Error al obtener datos para {pais} - {indicador}: {response.status_code}")


df = pd.DataFrame(resultados)

df
